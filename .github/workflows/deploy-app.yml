name: Deploy App ðŸ˜Ž

on: [push]

env:
  LINKR_DOMAIN: ${{ secrets.LINKR_DOMAIN }}
  LINKR_HOSTED_ZONE_ID: ${{ secrets.LINKR_HOSTED_ZONE_ID }}
  LINKR_DEFAULT_REDIRECT: ${{ secrets.LINKR_DEFAULT_REDIRECT }}
  AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
  AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
  AWS_DEFAULT_REGION: "eu-west-1"

jobs:
  deploy:
    name: Build & Deploy ðŸš€
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@main
      - uses: actions/setup-node@v3
        with:
          node-version: 16.x
      - run: npm ci
      - run: npm t
      - run: npm run deploy
